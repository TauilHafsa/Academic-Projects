{% macro render_status_buttons(reservation, now=None) %}
    {% if reservation.status == 'pending' %}
        <div class="d-flex justify-content-center">
            <form action="{{ url_for('reservation.approve', reservation_id=reservation._id) }}" method="post" class="me-2">
                <button type="submit" class="btn btn-success">
                    <i class="fas fa-check me-2"></i>Approuver
                </button>
            </form>
            <form action="{{ url_for('reservation.reject', reservation_id=reservation._id) }}" method="post">
                <button type="submit" class="btn btn-danger">
                    <i class="fas fa-times me-2"></i>Rejeter
                </button>
            </form>
        </div>
    {% elif reservation.status == 'approved' %}
        <div class="d-flex justify-content-center">
            <form action="{{ url_for('reservation.complete', reservation_id=reservation._id) }}" method="post" class="me-2">
                <button type="submit" class="btn btn-primary" {% if now and reservation.end_date > now %} disabled {% endif %}>
                    <i class="fas fa-flag-checkered me-2"></i>Terminer
                </button>
            </form>
            <form action="{{ url_for('reservation.cancel', reservation_id=reservation._id) }}" method="post">
                <button type="submit" class="btn btn-secondary">
                    <i class="fas fa-ban me-2"></i>Annuler
                </button>
            </form>
        </div>
    {% endif %}
{% endmacro %}